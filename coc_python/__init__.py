from typing import Final

import testscore


def main(code: bytes, test: bytes, verbosity: int = 0) -> testscore.ScoringTestResult:
    _code_object: Final = compile(code, f'<main>', 'exec', optimize=2)
    _test_code_object: Final = compile(test, f'<test>', 'exec', optimize=2)
    exec(_code_object)
    exec(_test_code_object)
    return testscore.main(verbosity)
